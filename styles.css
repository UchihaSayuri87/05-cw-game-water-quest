/* Merged stylesheet: combines brand palette, layout, HUD, grid, drops, and overlays. */

/* Brand colors and variables */
:root{
  /* tuned to a charity: water inspired palette */
  --cw-yellow: #FFCA3A;        /* softer warm yellow */
  --cw-blue:   #00AEEF;        /* bright charity-like blue */
  --cw-dark:   #073b4c;        /* deep navy for type */
  --muted:     #f6fbff;        /* soft page tint */
  --card-bg:   #ffffff;
  --focus-ring: rgba(0,174,239,0.18);
  --elevation-1: 0 10px 30px rgba(2,6,23,0.06);
  --radius-lg: 12px;

  /* add a couple of responsive token fallbacks */
  --hero-title-size: clamp(22px, 5vw, 40px);
  --cell-min: 110px; /* base min cell size */
}

*{ box-sizing:border-box; }

body{
  /* use Montserrat as the main type, then fall back to the other requested families and system fonts */
  font-family: "Montserrat", "Poppins", "Open Sans", "Mulish", "Lato", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
  margin:0;
  padding:18px;
  /* lighter backdrop, more like charity: water landing */
  background: linear-gradient(180deg, var(--muted) 0%, #ffffff 100%);
  color:var(--cw-dark);
  min-height:100vh;
  display:flex;
  flex-direction:column;
  align-items:center;
}

/* prefer Montserrat / Poppins for strong headings */
h1, .hero-title, .title-block h1 {
  font-family: "Montserrat", "Poppins", system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
  font-weight: 700;
  letter-spacing: -0.01em;
}

/* slightly lighter body-weight mapping for paragraphs / UI */
body, p, .tagline, .score, .timer, .achievement {
  font-weight: 400;
}

/* Container: slightly tighter so brand and banner sit compactly */
.container {
  max-width: 980px;
  margin: 28px auto;
  background-color: #fff;
  padding: 14px;
  border-radius: 12px;
  /* reduce heavy shadows across UI for cleaner look */
  box-shadow: 0 8px 28px rgba(2,6,23,0.04);
  display: flex;
  flex-direction: column;
  gap: 10px;
}

/* Brand / header â€” boost prominence so branding returns visually */
.brand-strip {
  display:flex;
  gap:12px;
  align-items:center;
  padding:12px 16px;
  border-radius:10px;
  background: linear-gradient(180deg, rgba(0,174,239,0.04), rgba(0,174,239,0.01));
  box-shadow: 0 8px 20px rgba(2,6,23,0.04);
  margin-bottom: 8px;
}

/* emphasize the square mark and wordmark */
.brand-square { width:56px; height:56px; border-radius:10px; flex:0 0 56px; }
.brand-horizontal { height:28px; width:auto; opacity:0.98; }

/* Banner / hero */
.banner-wrapper{
  padding:clamp(18px,6vw,48px); border-radius:var(--radius-lg);
  background: linear-gradient(180deg, var(--card-bg) 0%, #fbfdff 100%);
  display:flex; align-items:center; justify-content:center; flex-direction:column;
  box-shadow:var(--elevation-1); position:relative;
}
.banner-close{ position:absolute; right:12px; top:12px; width:44px; height:44px; border-radius:10px; border:none; background:rgba(255,255,255,0.95); cursor:pointer; display:inline-flex; align-items:center; justify-content:center; box-shadow:0 10px 26px rgba(2,6,23,0.08); }
.banner-hero{ max-width:740px; display:flex; flex-direction:column; gap:12px; align-items:center; text-align:center; padding:12px; }
.hero-icon { width:140px; height:140px; display:flex; align-items:center; justify-content:center; border-radius:18px; }
.hero-title { margin:0; color:var(--cw-blue); font-weight:900; font-size:clamp(28px,6vw,56px); line-height:1; letter-spacing:-0.02em; text-transform:uppercase; }

/* Play CTA */
.banner-play{
  background:var(--cw-blue); color:#fff; padding:14px 48px; border-radius:999px; font-weight:800;
  border:none; cursor:pointer; box-shadow:0 10px 30px rgba(0,174,239,0.14);
}
.banner-play:hover{ transform:translateY(-3px); box-shadow:0 18px 40px rgba(0,174,239,0.16); }

/* Hero image variant (uses external image file rather than embedding) */
.banner-wrapper.hero-image {
  background-image: url("img/hero-guide.jpg");
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  color: #ffffff; /* text over image should be white */
  /* keep padding but allow larger visual impact */
  padding: clamp(28px, 8vw, 72px);
  border-radius: 12px;
  box-shadow: 0 20px 60px rgba(2,6,23,0.12);
}

/* Ensure fallback content sits on top of the image and is readable */
.banner-wrapper.hero-image .banner-hero {
  background: rgba(0,0,0,0.0); /* transparent, image is background */
  text-align: center;
  color: #fff;
  gap: 20px;
}

/* Strong white stacked hero title like the guide */
.banner-wrapper.hero-image .hero-title {
  color: #ffffff;
  font-weight: 900;
  font-size: clamp(32px, 8vw, 88px);
  line-height: 0.95;
  text-transform: uppercase;
  letter-spacing: -0.02em;
  text-shadow: 0 6px 18px rgba(4,20,30,0.28);
  margin: 0;
}

/* Prominent blue PLAY pill matching the guide */
.banner-wrapper.hero-image .banner-play {
  background: #0B79D0; /* richer blue for higher contrast on yellow */
  color: #fff;
  padding: 16px 56px;
  font-size: clamp(16px, 3vw, 26px);
  border-radius: 999px;
  box-shadow: 0 16px 34px rgba(11,121,208,0.22);
  border: none;
  transition: transform 160ms ease, box-shadow 160ms ease;
}
.banner-wrapper.hero-image .banner-play:hover {
  transform: translateY(-4px);
  box-shadow: 0 22px 46px rgba(11,121,208,0.28);
}

/* Make the hero subcopy (tagline) subtle but readable */
.banner-wrapper.hero-image .tagline {
  color: rgba(255,255,255,0.95);
  font-size: clamp(14px, 2.6vw, 18px);
  margin: 0;
  text-shadow: 0 6px 18px rgba(4,20,30,0.18);
}

/* Reduce the visual weight of the inline brand imgs when the hero image is used */
.banner-wrapper.hero-image .brand-square,
.banner-wrapper.hero-image .brand-horizontal,
.banner-wrapper.hero-image #logoImg,
.banner-wrapper.hero-image #jerryBrand {
  filter: drop-shadow(0 8px 18px rgba(0,0,0,0.28));
  opacity: 0.98;
}

/* HUD */
.hud{ display:flex; gap:12px; align-items:center; justify-content:space-between; width:100%; }
.hud > div{ display:flex; gap:8px; align-items:center; }

/* HUD buttons */
.start-btn, .sound-btn { background:#fff; border:1px solid rgba(2,6,23,0.06); color:var(--cw-dark); box-shadow:0 6px 14px rgba(2,6,23,0.04); padding:10px 12px; border-radius:8px; cursor:pointer; }
.sound-btn[aria-pressed="true"]{ background:linear-gradient(180deg, rgba(2,43,60,0.12), rgba(2,43,60,0.06)); color:#fff; }

/* Game field and grid */
.game-field{ width:100%; max-width:820px; padding:18px; border-radius:12px; background:linear-gradient(180deg, rgba(46,157,247,0.04), rgba(46,157,247,0.01)); border:2px solid rgba(46,157,247,0.08); overflow:hidden; display:flex; align-items:center; justify-content:center; }
.game-grid{ width:min(720px,96%); display:grid; grid-template-columns:repeat(3, minmax(120px, 1fr)); gap:clamp(8px,1.6vw,16px); margin:6px auto; }

/* Make grid cells consistent squares so touch targets are predictable */
.grid-cell{
  position: relative;
  overflow: visible; /* allow wrappers to pop outside slightly */
  aspect-ratio: 1 / 1;         /* keep cells square */
  min-height: 120px;           /* fallback for browsers without aspect-ratio */
  padding: 8px;
  border-radius: 10px;
  display: flex;
  align-items: center;
  justify-content: center;
  outline: 1px solid rgba(2,6,23,0.04);
  cursor:pointer;
  transition:background-color 0.3s;

  /* Make grid cells easier to tap: breathing room, mobile touch handling */
  padding: 6px;
  touch-action: manipulation;
}

/* Water can visuals (refined) */
.grid-cell .water-can {
  width: clamp(48px, 10vw, 72px);
  height: clamp(48px, 10vw, 72px);
  border-radius: 8px;
  background-size: cover;
  background-repeat: no-repeat;
  background-position: center;
  pointer-events: auto;
  transition: transform 180ms ease, box-shadow 180ms ease, filter 160ms ease, opacity 160ms ease;
  z-index: 30;
  display: inline-block;
  position: relative;
  /* default neutral look (will be overridden for clean/obstacle by classes) */
  box-shadow: 0 8px 18px rgba(7,45,60,0.10);
  border: 2px solid rgba(0,0,0,0.04);
}

/* Clean can: brighter, pure, subtle droplet mark */
.grid-cell .water-can.clean {
  background-color: #fff;
  background-image: linear-gradient(180deg, rgba(255,255,255,0.98), rgba(46,157,247,0.06));
  border: 2px solid rgba(255,255,255,0.9); /* crisp rim */
  box-shadow: 0 10px 26px rgba(46,157,247,0.12), 0 2px 8px rgba(7,45,60,0.04);
  transform-origin: center;
}
.grid-cell .water-can.clean::after {
  content: '';
  position: absolute;
  width: 40%;
  height: 40%;
  left: 50%;
  top: 45%;
  transform: translate(-50%,-50%);
  background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path d='M12 2C8 7 6 9 6 12a6 6 0 0 0 12 0c0-3-2-5-6-10z' fill='%232E9DF7'/></svg>");
  background-size: contain;
  background-repeat: no-repeat;
  opacity: 0.95;
  pointer-events: none;
}

/* Dirty / obstacle can: stronger red treatment, larger exclamation badge */
.grid-cell .water-can.obstacle {
  transform: scale(1.06);
  box-shadow: 0 12px 36px rgba(245,64,44,0.22), 0 4px 12px rgba(0,0,0,0.06);
  border: 2px solid rgba(245,64,44,0.22);
  filter: saturate(1.05) contrast(1.02);
  background-image: linear-gradient(180deg, rgba(245,64,44,0.08), rgba(245,64,44,0.03));
  animation: obstacle-pulse 1200ms ease-in-out infinite;
}

/* stronger exclamation (bigger, more visible) */
.grid-cell .water-can.obstacle::after {
  content: "";
  position: absolute;
  right: -6%;
  top: -8%;
  width: 48%;
  height: 48%;
  background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><circle cx='12' cy='12' r='12' fill='%23F5402C'/><path d='M12 6.5a.9.9 0 0 1 .9.9v5.6a.9.9 0 0 1-1.8 0V7.4c0-.5.4-.9.9-.9zm0 10.1a1.1 1.1 0 1 1 0-2.2 1.1 1.1 0 0 1 0 2.2z' fill='%23fff'/></svg>");
  background-repeat: no-repeat;
  background-size: contain;
  background-position: center;
  pointer-events: none;
  transform-origin: center;
  filter: drop-shadow(0 8px 12px rgba(245,64,44,0.18));
}

/* Hover / focus affordances */
.grid-cell .water-can.clean:hover, .grid-cell .water-can.clean:focus {
  transform: translateY(-4px) scale(1.03);
  box-shadow: 0 16px 40px rgba(46,157,247,0.14);
}
.grid-cell .water-can.obstacle:hover, .grid-cell .water-can.obstacle:focus {
  transform: translateY(-2px) scale(1.08) rotate(-1deg);
  box-shadow: 0 18px 46px rgba(245,64,44,0.24);
}

/* Slight accessibility emphasis for obstacle focus */
.grid-cell .water-can.obstacle:focus-visible {
  outline: 3px solid rgba(245,64,44,0.18);
  outline-offset: 4px;
}

/* Drops (optional) */
.drop, .bad-drop{ position:absolute; top:-60px; width:44px; height:60px; border-radius:50% 50% 45% 45%; display:flex; align-items:center; justify-content:center; user-select:none; cursor:pointer; animation-name:fall; animation-timing-function:linear; }
.drop{ background:var(--cw-blue); box-shadow:inset -6px -10px 20px rgba(255,255,255,0.12); }
.bad-drop{ background:#6b4f3f; box-shadow:inset -6px -10px 14px rgba(255,255,255,0.05); }
@keyframes fall { to { transform: translateY(120vh); } }

/* Overlay / modals */
.overlay{ position:fixed; inset:0; display:flex; align-items:center; justify-content:center; background:rgba(0,0,0,0.45); z-index:40; padding:18px; box-sizing:border-box; }
.overlay .overlay-content{ background:#fff; padding:24px; border-radius:10px; max-width:680px; width:min(680px,92%); max-height:calc(100vh - 120px); overflow:auto; -webkit-overflow-scrolling:touch; box-shadow:0 8px 30px rgba(0,0,0,0.18); }
.overlay .overlay-content h2{ color:var(--cw-blue); margin:0 0 8px; }

/* Utility: hide helper used by scripts to toggle visibility */
.hidden {
  display: none !important;
  visibility: hidden !important;
  pointer-events: none !important;
}

/* Ensure overlay panels with .hidden stay visually removed (extra guard) */
.overlay.hidden { display: none !important; }
.overlay .overlay-content.hidden { display: none !important; }

/* CTA and misc */
.splash-btn{ background:transparent; color:var(--cw-blue); border:2px solid rgba(0,174,239,0.12); padding:10px 16px; border-radius:999px; font-weight:700; }
.splash-btn:hover{ background:rgba(0,174,239,0.06); transform:translateY(-2px); }

/* Accessibility & focus */
:focus{ outline:3px solid var(--focus-ring); outline-offset:4px; }

/* Responsive tweaks */
@media (max-width:800px){ .game-grid{ grid-template-columns:repeat(2, minmax(120px, 1fr)); } .hero-title{ font-size:28px; } }
@media (max-width:520px){ .hud{ flex-direction:column; gap:8px; align-items:stretch; } .banner-play{ padding:12px 36px; } .cta-wrap{ justify-content:center; } }