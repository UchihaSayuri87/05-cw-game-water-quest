<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width,initial-scale=1" />
	<title>Water Drop — Water Quest</title>
	<!-- Fonts: Montserrat primary, plus Poppins, Open Sans, Mulish, Lato fallbacks -->
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;600;700;900&family=Poppins:wght@300;400;600;700&family=Open+Sans:wght@300;400;600;700&family=Mulish:wght@300;400;600;700&family=Lato:wght@300;400;700&display=swap" rel="stylesheet">
 	<link rel="stylesheet" href="styles.css" />
</head>
<body>
	<!-- container: centers page content and provides card visual -->
	<div class="container">

	<!-- Brand strip: moved to the top so branding stands out immediately -->
	<div class="brand-strip" aria-hidden="false">
		<img class="brand-square"
		     role="img"
		     tabindex="0"
		     alt="charity: water mark"
		     aria-label="charity: water mark"
		     src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='60' height='60' viewBox='0 0 60 60'><rect width='60' height='60' rx='6' fill='%23FFC907'/></svg>" />

		<img class="brand-horizontal"
		     role="img"
		     tabindex="0"
		     alt="Clarity Water wordmark"
		     aria-label="Clarity Water wordmark"
		     src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='360' height='60' viewBox='0 0 360 60'><rect x='6' y='6' width='48' height='48' rx='6' fill='%23FFC907'/><text x='68' y='38' font-family='Montserrat, Arial, sans-serif' font-size='22' fill='%2307243a' font-weight='700'>Clarity Water</text></svg>" />
	</div>

 	<!-- new top banner (uses img/banner.png). If it fails to load the inline onerror adds .banner-broken) -->
 	<div class="banner-wrapper">
		<!-- banner close: allows dismissing a stuck banner -->
		<button id="bannerClose" type="button" class="banner-close" aria-label="Close banner">✕</button>
 		<!-- inline SVG banner fallback to avoid 404 when img/banner.png is missing -->
 		<img id="topBanner"
 		     class="top-banner"
 		     loading="lazy"
 		     src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='1200' height='280' viewBox='0 0 1200 280'><rect width='1200' height='280' rx='12' fill='%23FFC907'/><text x='50%' y='55%' dominant-baseline='middle' text-anchor='middle' font-family='Arial,Helvetica,sans-serif' font-size='56' fill='%2307243a' font-weight='700'>Water Quest</text></svg>"
 		     onerror="this.onerror=null; document.documentElement.classList.add('banner-broken');" />

 		<!-- Hero fallback: original header placed inside the hero, plus icon/title/play -->
 		<div class="banner-fallback"><!-- removed aria-hidden="true" to avoid focus/aria-hidden conflict -->
 			<div class="banner-hero">
 				<header class="site-header">
 					<!-- inline SVG logo fallback to avoid 404 when img/logo.png is missing -->
 					<img id="logoImg" class="logo" role="img" aria-label="charity: water logo" alt="charity: water logo"
 					     src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'><circle cx='32' cy='32' r='30' fill='%23ffffff' opacity='0.02'/><path d='M32 10c6 8 12 14 12 22 0 6.6-5.4 12-12 12s-12-5.4-12-12c0-8 6-14 12-22z' fill='%232E9DF7'/></svg>" />

 					<!-- jerry-can brand (inline SVG clean can) — accessible and always looks like the in-game clean can -->
 					<img id="jerryBrand" class="jerry-brand" role="img" tabindex="0" alt="Clean jerry can" aria-label="Clean jerry can"
 					     src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'><rect x='8' y='16' width='48' height='32' rx='6' fill='%23FFC907'/><rect x='12' y='8' width='8' height='10' rx='2' fill='%23072b3a'/><circle cx='46' cy='14' r='5' fill='%23072b3a'/><path d='M32 24s6 6 6 10a6 6 0 0 1-12 0c0-4 6-10 6-10z' fill='%232E9DF7'/></svg>" />
 					<div class="title-block">
 						<h1>Water Drop</h1>
 						<p class="tagline">Tap clean drops, avoid dirty ones — save as many as you can!</p>
 					</div>
 				</header>

 				<div class="hero-icon" aria-hidden="true"></div>
 				<h2 class="hero-title">WATER<br/>QUEST</h2>
 				<button id="bannerPlay" type="button" class="banner-play">PLAY</button>
 			</div>
 		</div>
 	</div>

		<main id="mainContent" role="main">
		<section class="hud">
			<div class="score">Score: <span id="score">0</span></div>
			<div class="timer">Time: <span id="time">30</span>s</div>

			<!-- added: reset button to restart immediately, difficulty selector, and tutorial button -->
			<div style="display:flex; gap:8px; align-items:center;">
				<button id="resetBtn" type="button" class="start-btn" title="Reset and restart">Reset</button>
				<label for="difficultySelect" style="font-weight:600; color:var(--cw-dark); font-size:0.95rem; margin-left:6px;">Difficulty</label>
				<select id="difficultySelect" aria-label="Select difficulty" style="padding:6px 8px; border-radius:8px; border:1px solid rgba(7,43,58,0.08); background:white;">
					<option value="easy">Easy</option>
					<option value="normal" selected>Normal</option>
					<option value="master">MasterQuest</option>
				</select>
				<button id="tutorialBtn" type="button" class="start-btn" title="How to play">How to play</button>
			</div>
		</section>

		<section id="gameField" class="game-field" aria-live="polite">
			<!-- whack-a-mole 3x3 grid -->
			<div class="game-grid" id="gameGrid" aria-hidden="false">
				<!-- make each cell keyboard-focusable so users can press Enter/Space -->
				<div class="grid-cell" data-index="0" tabindex="0"></div>
				<div class="grid-cell" data-index="1" tabindex="0"></div>
				<div class="grid-cell" data-index="2" tabindex="0"></div>
				<div class="grid-cell" data-index="3" tabindex="0"></div>
				<div class="grid-cell" data-index="4" tabindex="0"></div>
				<div class="grid-cell" data-index="5" tabindex="0"></div>
				<div class="grid-cell" data-index="6" tabindex="0"></div>
				<div class="grid-cell" data-index="7" tabindex="0"></div>
				<div class="grid-cell" data-index="8" tabindex="0"></div>
			</div>

			<div id="achievement" class="achievement" aria-live="polite"></div>

			<!-- progress bar: add ARIA role and numeric percent element -->
			<div id="goalProgress" class="progress" role="progressbar" aria-label="Progress toward goal" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0">
				<div id="progress-fill" class="progress-fill" style="width:0%"></div>
			</div>
			<div class="progress-text" aria-hidden="true"><span id="progressPercent">0%</span> toward goal</div>
		</section>
		</main>
	</div> <!-- /.container -->
 
 	<div id="overlay" class="overlay hidden" role="dialog" aria-modal="true">
		<!-- End-game panel -->
		<div id="endPanel" class="overlay-content hidden" aria-hidden="true">
			<h2 id="resultTitle">Time's up!</h2>
			<p id="resultMessage"></p>
			<p class="final-score">Final score: <span id="finalScore">0</span></p>
			<div style="display:flex; gap:8px; justify-content:center; align-items:center;">
				<button id="replayBtn" type="button" class="start-btn">Play again</button>
				<button id="closeEndBtn" type="button" class="start-btn">Close</button>
			</div>
		</div>
 
 		<!-- Tutorial panel (hidden by default) -->
 		<div id="tutorialPanel" class="overlay-content hidden" aria-hidden="true">
			<h2>How to play</h2>
			<div class="tutorial-body">
				<p><strong>Goal:</strong> Tap the clean yellow jerry-cans to earn points. Reach 10 points to win.</p>
				<ul>
					<li>Each clean can tapped = +1 point.</li>
					<li>Dirty/obstacle cans deduct points (avoid them).</li>
					<li>You have 30 seconds — a countdown timer is shown in the HUD.</li>
					<li>Use the <em>Difficulty</em> selector to change spawn rate and challenge; use <em>Reset</em> to restart immediately.</li>
					<li>Keyboard: TAB to a cell and press Enter/Space to tap the can inside it.</li>
				</ul>
				<p class="tutorial-note">Tip: try Normal or MasterQuest for faster spawns once you get comfortable.</p>

				<!-- new: option to skip tutorial in future and a quick "skip & play" action -->
				<div style="display:flex; gap:8px; align-items:center; justify-content:center; margin-top:10px;">
					<label style="display:flex; align-items:center; gap:8px; font-size:14px;">
						<input id="dontShowTutorial" type="checkbox" />
						<span>Don't show again</span>
					</label>
					<button id="skipTutorialBtn" type="button" class="start-btn">Skip &amp; Play</button>
					<button id="closeTutorialBtn" type="button" class="start-btn">Close</button>
				</div>
			</div>
 		</div>
 	</div>
	<!-- container closed above -->

	<script src="script.js"></script>
 </body>
 </html>
